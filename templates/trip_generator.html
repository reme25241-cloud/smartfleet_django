<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title>{{ title|default:"Smart Fleet Ai" }}</title>
</head>

<body class="bg-gray-100 text-white font-sans p-6">
  <div class="max-w-7xl mx-auto bg-[#0B132B] p-6 rounded-lg shadow-lg">
    <h1 class="text-2xl font-semibold mb-6">Trip Generator</h1>
    <form method="POST" class="bg-[#3A506B] p-6 rounded-lg grid grid-cols-2 gap-4" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="col-span-2 flex gap-4">
        <input type="file" name="pdf_file" accept=".pdf" class="bg-white text-black rounded px-3 py-2">
        <input type="file" name="excel_file" accept=".xlsx,.xls" class="bg-white text-black rounded px-3 py-2">
      </div>
      {% for field in 'trip_id,trip_date,vehicle_id,driver_id,planned_distance,advance_given,origin,destination,vehicle_type,flags,total_freight'.split(',') %}
        <div>
          <label class="block text-sm text-gray-200 capitalize">{{ field.replace('_',' ') }}</label>
          <input name="{{ field }}" value="{{ parsed_data|get_item:field }}" class="w-full px-3 py-2 rounded bg-gray-200 text-black" type="text">
        </div>
      {% endfor %}
      <button type="submit" class="mt-6 bg-[#1C2541] hover:bg-[#3A506B] px-4 py-2 rounded text-white col-span-2">Submit</button>
    </form>

    <h2 class="text-xl font-semibold mt-10 mb-4">Trip Generated Details</h2>
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white text-black rounded shadow overflow-hidden">
        <thead class="bg-[#3A506B] text-white">
          <tr>
            <th class="px-2 py-2">Trip ID</th>
            <th class="px-2 py-2">Date</th>
            <th class="px-2 py-2">Vehicle ID</th>
            <th class="px-2 py-2">Driver ID</th>
            <th class="px-2 py-2">Distance</th>
            <th class="px-2 py-2">Advance</th>
            <th class="px-2 py-2">Origin</th>
            <th class="px-2 py-2">Destination</th>
            <th class="px-2 py-2">Type</th>
            <th class="px-2 py-2">Flags</th>
            <th class="px-2 py-2">Freight</th>
          </tr>
        </thead>
        <tbody>
          {% for row in all_trips %}
            <tr class="border-t">{% for col in row %}<td class="px-2 py-1">{{ col }}</td>{% endfor %}</tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body></html>
